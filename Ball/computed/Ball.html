
<style>

#debug {
	margin: 50px;
	font-size: 25px;
}

#ball {
  width: 100px;
  height: 100px;
  background-color: red;
  border-radius: 50%;
  position: absolute;
  bottom: 0;
  animation: bounce 2s infinite ease-in-out;
}

@keyframes bounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-500px); }
}

</style>

<div id="debug"></div>
<div id="ball"></div>

<script>

(async () => {

/*

Impl.js

*/

// Generated by https://chat.openai.com/c/88435a8c-6aa1-4791-bf70-a686f64494d4

// Functions
function moveLeft(ballPos) {
  // Ensure ballPos is within bounds after move
  return Math.max(0, ballPos - 1);
}

function moveRight(ballPos) {
  // Ensure ballPos is within bounds after move
  return Math.min(10, ballPos + 1);
}

// Predicates
function leftmost(ballPos) {
  return ballPos === 0;
}

function rightmost(ballPos) {
  return ballPos === 10;
}

// Wrapper

const X_STEP_DURATION = 200;

class Ball {
	constructor() {
		this.pos = 0
	}

	render() {
		const ball = document.getElementById('ball');
		ball.style.transition = `left ${X_STEP_DURATION}ms linear`;
		ball.style.left = `${this.pos / 10 * (screen.availWidth - 100)}px`;

		const debug = document.querySelector('#debug');
		debug.textContent = 'Current State: ' + currentState
	}
}

window.currentState = 0

const ball = new Ball()
ball.render()

// /*

// Wait for 1s to sync the up-and-down animationw with bouncing, in order to make it look like the
// ball is bouncing.

// */
// await new Promise(((resolve) => resolve()), 1000)

setInterval(
	(() => {

		/*

		Impl

		Generated by TSL synthesis

		*/
		if (currentState === 0) {
		  if (!leftmost(ball.pos) && rightmost(ball.pos)) {
		    ball.pos = moveLeft(ball.pos)
		    currentState = 1
		  }
		  else if (!leftmost(ball.pos) && !rightmost(ball.pos)) {
		    ball.pos = moveLeft(ball.pos)
		    currentState = 1
		  }
		  else if (leftmost(ball.pos) && !rightmost(ball.pos)) {
		    ball.pos = moveLeft(ball.pos)
		    currentState = 2
		  }
		  else if (leftmost(ball.pos) && rightmost(ball.pos)) {
		    ball.pos = ball.pos
		    currentState = 3
		  }
		  else if (leftmost(ball.pos) && rightmost(ball.pos)) {
		    ball.pos = moveRight(ball.pos)
		    currentState = 3
		  }
		  else if (leftmost(ball.pos) && rightmost(ball.pos)) {
		    ball.pos = moveLeft(ball.pos)
		    currentState = 3
		  }
		}
		else if (currentState === 1) {
		  if (!leftmost(ball.pos) && !rightmost(ball.pos)) {
		    ball.pos = moveLeft(ball.pos)
		    currentState = 1
		  }
		  else if (leftmost(ball.pos) && !rightmost(ball.pos)) {
		    ball.pos = moveRight(ball.pos)
		    currentState = 4
		  }
		  else if (rightmost(ball.pos)) {
		    currentState = 5
		  }
		  else if (rightmost(ball.pos)) {
		    ball.pos = moveLeft(ball.pos)
		    ball.pos = moveRight(ball.pos)
		    currentState = 5
		  }
		  else if (rightmost(ball.pos)) {
		    ball.pos = moveLeft(ball.pos)
		    ball.pos = ball.pos
		    currentState = 5
		  }
		  else if (rightmost(ball.pos)) {
		    ball.pos = moveRight(ball.pos)
		    ball.pos = ball.pos
		    currentState = 5
		  }
		}
		else if (currentState === 2) {
		  if (leftmost(ball.pos) && !rightmost(ball.pos)) {
		    ball.pos = moveRight(ball.pos)
		    currentState = 4
		  }
		  else if (rightmost(ball.pos)) {
		    currentState = 5
		  }
		  else if (rightmost(ball.pos)) {
		    ball.pos = moveLeft(ball.pos)
		    ball.pos = moveRight(ball.pos)
		    currentState = 5
		  }
		  else if (rightmost(ball.pos)) {
		    ball.pos = moveLeft(ball.pos)
		    ball.pos = ball.pos
		    currentState = 5
		  }
		  else if (rightmost(ball.pos)) {
		    ball.pos = moveRight(ball.pos)
		    ball.pos = ball.pos
		    currentState = 5
		  }
		  else if (!leftmost(ball.pos) && !rightmost(ball.pos)) {
		    ball.pos = moveRight(ball.pos)
		    currentState = 5
		  }
		}
		else if (currentState === 3) {
		  if (true) {
		    currentState = 5
		  }
		  else if (true) {
		    ball.pos = moveLeft(ball.pos)
		    ball.pos = moveRight(ball.pos)
		    currentState = 5
		  }
		  else if (true) {
		    ball.pos = moveLeft(ball.pos)
		    ball.pos = ball.pos
		    currentState = 5
		  }
		  else if (true) {
		    ball.pos = moveRight(ball.pos)
		    ball.pos = ball.pos
		    currentState = 5
		  }
		}
		else if (currentState === 4) {
		  if (!leftmost(ball.pos) && rightmost(ball.pos)) {
		    ball.pos = moveLeft(ball.pos)
		    currentState = 1
		  }
		  else if (!leftmost(ball.pos) && !rightmost(ball.pos)) {
		    ball.pos = moveRight(ball.pos)
		    currentState = 4
		  }
		  else if (leftmost(ball.pos)) {
		    currentState = 5
		  }
		  else if (leftmost(ball.pos)) {
		    ball.pos = moveLeft(ball.pos)
		    ball.pos = moveRight(ball.pos)
		    currentState = 5
		  }
		  else if (leftmost(ball.pos)) {
		    ball.pos = moveLeft(ball.pos)
		    ball.pos = ball.pos
		    currentState = 5
		  }
		  else if (leftmost(ball.pos)) {
		    ball.pos = moveRight(ball.pos)
		    ball.pos = ball.pos
		    currentState = 5
		  }
		}
		else if (currentState === 5) {
		  if (!leftmost(ball.pos) && rightmost(ball.pos)) {
		    ball.pos = moveLeft(ball.pos)
		    currentState = 1
		  }
		  else if (!leftmost(ball.pos) && !rightmost(ball.pos)) {
		    ball.pos = moveLeft(ball.pos)
		    currentState = 1
		  }
		  else if (leftmost(ball.pos)) {
		    currentState = 5
		  }
		  else if (leftmost(ball.pos)) {
		    ball.pos = moveLeft(ball.pos)
		    ball.pos = moveRight(ball.pos)
		    currentState = 5
		  }
		  else if (leftmost(ball.pos)) {
		    ball.pos = moveLeft(ball.pos)
		    ball.pos = ball.pos
		    currentState = 5
		  }
		  else if (leftmost(ball.pos)) {
		    ball.pos = moveRight(ball.pos)
		    ball.pos = ball.pos
		    currentState = 5
		  }
		}

		console.log('currentState', currentState, ball)
		ball.render()

	}),
	X_STEP_DURATION
)

})()

</script>
