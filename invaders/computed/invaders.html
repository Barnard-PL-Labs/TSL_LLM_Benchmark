<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Space Invaders</title>
    <style>
        #gameArea {
            width: 800px;
            height: 600px;
            position: relative;
            overflow: hidden;
            background-color: black;
            margin: 20px auto;
            display: flex;
            align-items: flex-end;
            justify-content: center;
        }
        
        .ship {
            width: 50px;
            height: 50px;
            background-color: blue;
            position: absolute;
            bottom: 10px;
        }
        
        .bullet {
            width: 5px;
            height: 20px;
            background-color: yellow;
            position: absolute;
        }
        
        .enemy {
            width: 40px;
            height: 40px;
            background-color: red;
            position: absolute;
            top: 10px;
        }
    </style>
</head>

<body>
    <div id="gameArea">
        <div class="ship" id="ship"></div>
    </div>
    <script>
        let gameArea = document.getElementById('gameArea')
        let ship = document.getElementById('ship')

        // Variables to track game state
        let shipPosition = 400 // Initial horizontal center position for the ship
        const shipSpeed = 10 // Ship movement speed

        // Key press states
        const keys = {
            ArrowLeft: false,
            ArrowRight: false,
            Space: false,
        }

        // Setup event listeners for key presses
        document.addEventListener('keydown', (event) => {
            if (
                event.key === 'ArrowLeft' ||
                event.key === 'ArrowRight' ||
                event.key === 's'
            ) {
                console.log('key pressed' + event.key)
                keys[event.key] = true
            }
        })

        document.addEventListener('keyup', (event) => {
            if (
                event.key === 'ArrowLeft' ||
                event.key === 'ArrowRight' ||
                event.key === 's'
            ) {
                keys[event.key] = false
            }
        })

        // Game loop to update position and render game
        function gameLoop() {
            if (keys.ArrowLeft && shipPosition > 0) {
                shipPosition -= shipSpeed
            }
            if (
                keys.ArrowRight &&
                shipPosition < gameArea.offsetWidth - ship.offsetWidth
            ) {
                shipPosition += shipSpeed
            }

            // Update ship position
            ship.style.left = shipPosition + 'px'

            // Check for shooting
            if (keys.s) {
                shoot()
            }

            requestAnimationFrame(gameLoop)
        }

        function shoot() {
            console.log('shoooting')
            let bullet = document.createElement('div')
            bullet.className = 'bullet'
            bullet.style.backgroundColor = 'red' // Set the color to red
            bullet.style.left = shipPosition + 22.5 + 'px' // Center of the ship
            bullet.style.bottom = '60px' // Starting from the top of the ship
            gameArea.appendChild(bullet)

            // Move the bullet upwards
            function moveBullet() {
                let currentBottom = parseInt(bullet.style.bottom, 10)
                if (currentBottom > gameArea.offsetHeight) {
                    gameArea.removeChild(bullet) // Remove the bullet if it goes out of bounds
                } else {
                    bullet.style.bottom = currentBottom + 20 + 'px' // Move bullet
                    requestAnimationFrame(moveBullet)
                }
            }

            moveBullet()
        }

        // Start the game loop
        requestAnimationFrame(gameLoop)
    </script>
</body>

</html>